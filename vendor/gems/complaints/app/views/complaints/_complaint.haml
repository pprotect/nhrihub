%h1= t('.heading', case_reference: @complaint.case_reference)

#complaint
  .row.well.well-sm
    .col-md-10.col-md-offset-1
      .row
        .col-md-3
          %span#complaint_id(style='display: none')= @complaint.id
          %span= t('.date_received')
        .col-md-9.date_received= @complaint.date_received.to_date.to_s(:short)
      .row
        .col-md-3
          %span= t('.current_assignee')
        .col-md-9
          %span.current_assignee= @complaint.current_assignee_name
      .row
        .col-md-3
          %span= t('.status')
        .col-md-9
          #status_changes
            - @complaint.status_changes.each do |status_change|
              .status_change
                %span.status_humanized= status_change.status_humanized
                %span.by= t('.by')
                %span.user_name= status_change.user_name
                %span.on= t('.on')
                %span.date= status_change.date.to_date.to_s(:short)
      .row#complainant
        .col-md-3= t('.complainant')
        .col-md-9
          %span.title= @complaint.title
          %span.firstName= @complaint.firstName
          %span.lastName= @complaint.lastName
      .row
        .col-md-3= t('.dob')
        .col-md-3.complainant_dob= @complaint.date_of_birth
        .col-md-2{:style => "text-align:right"}= t('.gender')
        .col-md-4.gender= @complaint.gender
      .row
        .col-md-3= t('.email')
        .col-md-9.email= @complaint.email
      .row
        .col-md-3= t('.village')
        .col-md-9.complainant_village= @complaint.village
      .row
        .col-md-3= t('.phone')
        .col-md-9.complainant_phone= @complaint.phone
      .row
        .col-md-3= t('.details')
        .col-md-9.complaint_details= @complaint.details
      .row
        .col-md-3= t('.desired_outcome')
        .col-md-9.desired_outcome= @complaint.desired_outcome
      .row
        .col-md-3= t('.complained_to_subject_agency')
        .col-md-3.complained_to_subject_agency= @complaint.complained_to_subject_agency.y_n
      .row
        .col-md-3= t('.assignees_history')
        .col-md-9#assignees
          - @complaint.assigns.each do |assign|
            .row.assignee
              .col-md-6.date= assign.date
              .col-md-6.name= assign.name
      .row
        .col-md-3= t('.mandate')
        .col-md-9#mandate= @complaint.complaint_area.name
      .row
        .col-md-3= t('.complaint_basis')
        .col-md-9
          .area
            .name= @complaint.complaint_area.name
            .subareas.comma-list
              - @complaint.complaint_subareas.each do |subarea|
                %span.subarea= subarea.name
      .row
        .col-md-3= t('.agency')
        .col-md-9
          #agencies.comma-list{:style => "display:flex"}
            - @complaint.agencies.each do |agency|
              %span.agency= agency.name
      .row
        .col-md-3= t('.documents')
        .col-md-9#complaint_documents
          - unless @complaint.attached_documents.empty?
            .row
              .col-md-6.title title
              .col-md-4.filename filename
            - @complaint.attached_documents.each do |document|
              .complaint_document
                .row
                  .col-md-6.title= document.title
                  .col-md-4.filename= document.truncated_filename
                  .col-md-1.download
                    %a{href: complaint_document_path(document.id)}
                      %i.fa.fa-cloud-download
          - else
            %div(style = 'padding-left:15px;') no documents
