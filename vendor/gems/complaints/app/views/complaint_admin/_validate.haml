%a{"data-target" => "#instructions_modal", "data-toggle" => "modal", :style => "cursor:pointer; display:block; margin-bottom:12px;"} Instructions...

=render partial: 'instructions_modal'

=form_with url: complaint_admin_validate_path(:en,:xlsx), id: 'validate_form', multipart: true do
  %input{name: 'validate[source_file]', type: :file}
  %select{name: 'validate[column]', 'onchange':'show_pattern()', style: 'height:32px;margin-top: 12px;'}
    %option{disabled: true, selected: true} select column
    = ComplaintCsvFileValidator::Columns.each do |k,v|
      %option{value: k}= v
  %button.btn.btn-success.btn-sm#validate{type: :submit, style: 'cursor: pointer;'}  Validate
%div#patterns{style: "margin-top:12px;"}
  #title{style: "font-size: larger;"}
  #description{style: "margin-left:12px"}

%div{style: 'margin-bottom: 180px'}

:coffeescript
  $ ->
    select_options = #{ComplaintCsvFileValidator::Columns.to_json.html_safe}
    data_patterns = JSON.parse('#{ComplaintCsvFileValidator::DataPatterns.to_json.html_safe}')
    window.show_pattern = ->
      val = $('#validate_form select').val()
      col = select_options[val]
      pattern = data_patterns[val]
      $('#patterns #title').text("Data patterns for column: \""+col+"\"")
      $('#description').html(pattern)
